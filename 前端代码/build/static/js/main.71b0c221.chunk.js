(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{178:function(e,t,n){},179:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(27),s=n.n(r),i=(n(178),n(102)),o=n(23),u=n(94),l=(n(179),n(168)),d=n(279),p=n(281),j=n(36),b=n(284),f=n(285),h=n(12),x={labelCol:{span:8},wrapperCol:{span:24}},O={wrapperCol:{offset:0,span:24}};var m=function(){var e=Object(o.g)();return Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("header",{className:"login-header",children:Object(h.jsx)("h1",{children:"\u4e91\u76d8"})}),Object(h.jsxs)("section",{className:"login-content",children:[Object(h.jsx)("h2",{children:"\u7528\u6237\u767b\u5f55"}),Object(h.jsxs)(d.a,Object(u.a)(Object(u.a)({},x),{},{name:"basic",initialValues:{remember:!0},onFinish:function(t){var n=t.username,c=t.password;(console.log("\u6210\u529f\u4e86",n,c),n===c)?(l.b.success("\u767b\u9646\u6210\u529f"),window.localStorage.user=n,e.push("/")):l.b.error("\u767b\u9646\u5931\u8d25")},children:[Object(h.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(h.jsx)(p.a,{prefix:Object(h.jsx)(b.a,{}),placeholder:"Username"})}),Object(h.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(h.jsx)(p.a.Password,{prefix:Object(h.jsx)(f.a,{}),placeholder:"password"})}),Object(h.jsx)(d.a.Item,Object(u.a)(Object(u.a)({},O),{},{children:Object(h.jsx)(j.a,{type:"primary",htmlType:"submit",className:"login-button",children:"\u767b\u5f55"})}))]}))]})]})},y=n(136),w=n(44),g=n.n(w),v=n(72),k=n(127),C=n(278),S=n(283),I=n(282),T=n(280),P=n(91),E=n.n(P);function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(c,a){("GET"===n?E.a.get(""+e,{params:t}):E.a.post(""+e,t)).then((function(e){c(e.data)})).catch((function(e){l.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86")}))}))}var L=function(){return F("https://6d37dbf4ca674819a048480016fc65f4.apig.cn-north-1.huaweicloudapis.com/all_list")},z=function(e){return F("https://6d37dbf4ca674819a048480016fc65f4.apig.cn-north-1.huaweicloudapis.com/download",e,"POST")},A=n(162),D=n.n(A),N=C.a.Column;var R=function(){var e=Object(o.g)(),t=Object(c.useState)([]),n=Object(k.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(k.a)(s,2),u=i[0],d=i[1],p=Object(c.useState)(""),b=Object(k.a)(p,2),f=b[0],x=b[1],O=Object(c.useRef)(null),m=Object(c.useRef)(null);if(Object(c.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!window.localStorage.user)return Object(h.jsx)(o.a,{to:"/login"});var w=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n=e.sent,E()({method:"get",responseType:"blob",url:n}).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),c=document.createElement("a");c.style.display="none",c.href=n,c.setAttribute("download",t),document.body.appendChild(c),c.click()})).catch((function(e){l.b.error("\u4e0b\u8f7d\u51fa\u9519\u4e86\uff0c\u8bf7\u91cd\u8bd5")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return-1!==["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].indexOf(e.toLowerCase())},A=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,c,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.lastIndexOf("."),c=t.substr(n+1),!P(c)){e.next=10;break}return e.next=5,z(t);case 5:a=e.sent,x(a),d(!0),e.next=11;break;case 10:l.b.error("\u6587\u4ef6\u4e0d\u652f\u6301\u9884\u89c8\uff0c\u4ec5\u652f\u6301\u56fe\u7247\u9884\u89c8");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,F("https://6d37dbf4ca674819a048480016fc65f4.apig.cn-north-1.huaweicloudapis.com/upload","GET");case 3:n=e.sent,(c=new FormData(O.current)).set("key",m.current.files[0].name),c.set("policy",n.policy),c.set("AccessKeyId",n.ak),c.set("signature",n.signature),c.forEach((function(e,t){console.log(t,e)})),D.a.ajax({method:"POST",url:"http://lxy-bucket-input.obs.cn-north-1.myhuaweicloud.com/",data:c,contentType:!1,processData:!1,success:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.b.success("\u4e0a\u4f20\u6210\u529f"),e.t0=r,e.t1=y.a,e.next=5,L();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e){l.b.success("\u4e0a\u4f20\u5931\u8d25")}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("header",{children:[Object(h.jsx)("h2",{style:{display:"inline-block",fontSize:"16px"},children:"lxy\u7684\u4e91\u76d8"}),Object(h.jsx)(j.a,{onClick:function(){window.localStorage.clear(),e.push("/login")},type:"primary",style:{float:"right"},children:"\u767b\u51fa"}),Object(h.jsxs)("form",{id:"a",ref:O,action:"http://lxy-bucket-input.obs.cn-north-1.myhuaweicloud.com",method:"post",encType:"multipart/form-data",children:[Object(h.jsx)("input",{type:"hidden",name:"key",value:"filename"}),Object(h.jsx)("input",{type:"hidden",name:"x-obs-acl",value:"public-read"}),Object(h.jsx)("input",{type:"hidden",name:"content-type",value:"text/plain"}),Object(h.jsx)("input",{type:"hidden",name:"policy",value:"policy"}),Object(h.jsx)("input",{type:"hidden",name:"AccessKeyId",value:"AccessKeyId"}),Object(h.jsx)("input",{type:"hidden",name:"signature",value:"signature"}),Object(h.jsx)("input",{ref:m,name:"file",type:"file"}),Object(h.jsx)(j.a,{onClick:function(e){return R(e)},children:"\u4e0a\u4f20\u6587\u4ef6"})]})]}),Object(h.jsxs)(C.a,{dataSource:a,children:[Object(h.jsx)(N,{title:"\u6587\u4ef6\u540d",dataIndex:"key",render:function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("a",{style:{color:"blue"},onClick:function(){return A(e)},children:e})})}},"key"),Object(h.jsx)(N,{title:"\u5927\u5c0f",dataIndex:"size"},"size"),Object(h.jsx)(N,{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"time"},"time"),Object(h.jsx)(N,{title:"\u884c\u4e3a",render:function(e,t){return Object(h.jsxs)(S.b,{size:"middle",children:[Object(h.jsx)("a",{download:!0,onClick:function(){w(e.key)},children:"\u4e0b\u8f7d\u6587\u4ef6"}),Object(h.jsx)("a",{onClick:Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F("https://6d37dbf4ca674819a048480016fc65f4.apig.cn-north-1.huaweicloudapis.com/del",e.key,"POST");case 2:if(""!=t.sent){t.next=12;break}return t.t0=r,t.t1=y.a,t.next=8,L();case 8:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3),l.b.success("\u5220\u9664\u6210\u529f");case 12:case"end":return t.stop()}}),t)}))),children:"\u5220\u9664\u6587\u4ef6"})]})}},"action")]}),Object(h.jsx)(I.a,{title:"\u70b9\u51fb\u56fe\u7247\u653e\u5927\u9884\u89c8",visible:u,onOk:function(){d(!1)},onCancel:function(){d(!1),x("")},footer:[],children:Object(h.jsx)(T.a,{width:200,src:f})})]})};var B=function(){return Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",component:R}),Object(h.jsx)(o.b,{path:"/login",component:m})]})})},G=(n(274),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,286)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))});s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root")),G()}},[[275,1,2]]]);
//# sourceMappingURL=main.71b0c221.chunk.js.map